{"code":"!function(n){var e={};function t(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return n[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}t.m=n,t.c=e,t.d=function(n,e,r){t.o(n,e)||Object.defineProperty(n,e,{enumerable:!0,get:r})},t.r=function(n){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(n,\"__esModule\",{value:!0})},t.t=function(n,e){if(1&e&&(n=t(n)),8&e)return n;if(4&e&&\"object\"==typeof n&&n&&n.__esModule)return n;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,\"default\",{enumerable:!0,value:n}),2&e&&\"string\"!=typeof n)for(var o in n)t.d(r,o,function(e){return n[e]}.bind(null,o));return r},t.n=function(n){var e=n&&n.__esModule?function(){return n.default}:function(){return n};return t.d(e,\"a\",e),e},t.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)},t.p=\"\",t(t.s=0)}([function(n,e,t){t(1),t(2),t(3),t(4)},function(n,e){var t;window.Bus=((t=function(){this.__z_e_listeners={}}).prototype.on=function(n,e,t){var r=this.__z_e_listeners[n];void 0===r&&(r=[],this.__z_e_listeners[n]=r);var o={handler:e,context:t};return r.push(o),o},t.prototype.off=function(n,e,t){var r=this.__z_e_listeners[n];if(void 0!==r)for(var o=r.length,i=0;i<o;i++){var a=r[i];if(a.handler===e&&a.context===t)return void r.splice(i,1)}},t.prototype.emit=function(n,e){var t=this.__z_e_listeners[n];if(void 0!==t)for(var r=t.length,o=0;o<r;o++){var i=t[o],a=i.handler,s=i.context;a.apply(s,[e])}},new t)},function(n,e){window.PersonalityTester=function(){let n=n=>`personalities/${n}.png`,e=n=>`personality_names/${n}.png`,t={name:\"\",sex:\"\"};const r=[{name:\"山大橘猫型人格\",url:n(\"shandajumao\"),nameUrl:e(\"shandajumao\")},{name:\"山大白猫型人格\",url:n(\"baimao\"),nameUrl:e(\"baimao\")},{name:\"知新楼型人格\",url:n(\"zhixinlou\"),nameUrl:e(\"zhixinlou\")},{name:\"小树林型人格\",url:n(\"xiaoshulin\"),nameUrl:e(\"xiaoshulin\")},{name:\"情人坡型人格\",url:n(\"qingrenpo\"),nameUrl:e(\"qingrenpo\")},{name:\"青岛风型人格\",url:n(\"qingdaofeng\"),nameUrl:e(\"qingdaofeng\")},{name:\"文心湖型人格\",url:n(\"wenxinhu\"),nameUrl:e(\"wenxinhu\")},{name:\"鸡蛋饼型人格\",url:n(\"jidanbing\"),nameUrl:e(\"jidanbing\")},{name:\"号院型人格\",url:n(\"haoyuan\"),nameUrl:e(\"haoyuan\")},{name:\"风雨操场型人格\",url:n(\"fengyucaochang\"),nameUrl:e(\"fengyucaochang\")},{name:\"麻辣香锅人格\",url:n(\"malaxiangguo\"),nameUrl:e(\"malaxiangguo\")},{name:\"校友门型人格\",url:n(\"xiaoyoumen\"),nameUrl:e(\"xiaoyoumen\")},{name:\"海棠花型人格\",url:n(\"haitanghua\"),nameUrl:e(\"haitanghua\")}];let o=[];const i={A:Symbol(\"A\"),B:Symbol(\"B\"),C:Symbol(\"C\"),D:Symbol(\"D\")},a=()=>Math.random()>=.5,s=()=>{let n=Math.random();return n>=2/3?1:n>=1/3?0:-1};let l=null;return{updateUserInfo:(n,e)=>{t.name=n,t.sex=e},updateAnswer(n,e){o[n]=e},getTestingResult(){if(l)return l;if(o[5]===i.A){let n=s();l=r[n>0?0:n<0?6:9]}else if(o[4]===i.A){let n=s();l=r[n>0?1:n<0?8:11]}else if(o[5]===i.D)l=r[a()?a()?3:4:a()?10:12];else{let n=s();l=r[n>0?2:n<0?5:7]}return l},showResult(){let n=this.getTestingResult(),e=document.createElement(\"div\");document.body.appendChild(e),e.outerHTML=`\\n            <div class=\"testing-result\" id=\"testing-result\">\\n    <img src=\"private_images/cele.png\" class=\"cele\">\\n    <img src=\"private_images/dangdangdang.png\" class=\"dangdangdang\">\\n    <img class=\"personality\" src=\"${n.nameUrl}\">\\n    <button class=\"enter-button\" id=\"enter-button\">点击查看你的人格报告</button>\\n    <style>\\n        .testing-result{\\n            position: fixed;\\n            left: 0;\\n            top: 0;\\n            width: 100%;\\n            height: 100%;\\n            background-color: #bbdadc;\\n            color: #0a2d2f;\\n        }\\n        .testing-result .cele{\\n            width: 50%;\\n            position: absolute;\\n            left: 0;\\n        }\\n        .testing-result .dangdangdang{\\n            width: 70%;\\n            position: absolute;\\n            left: 15%;\\n            top: 20%;\\n            animation: dangdangdang ease-in-out 200ms infinite alternate ;\\n            transform-origin: 30% 70%;\\n        }\\n        @keyframes dangdangdang {\\n            0%{\\n                transform: rotateZ(0);\\n            }\\n            100%{\\n                transform: rotateZ(5deg);\\n            }\\n        }\\n        .testing-result .personality{\\n            position: absolute;\\n            box-sizing: border-box;\\n            width: 83%;\\n            left: 10%;\\n            top: 50%;\\n        }\\n        .testing-result .enter-button{\\n            position: absolute;\\n            bottom: 1em;\\n            right: 1em;\\n            border: none;\\n            background-color: transparent;\\n            color: inherit;\\n            font-size: 1.2em;\\n        }\\n\\n        .testing-result .enter-button:focus{\\n            outline: none;\\n        }\\n    </style>\\n</div>\\n`;let t=document.getElementById(\"enter-button\"),r=document.getElementById(\"testing-result\");t.addEventListener(\"click\",function(){r.parentNode.removeChild(r),PersonalityTester.showPersonalPoster()})},showPersonalPoster(){let e=this.getTestingResult(),r=document.createElement(\"canvas\"),o=r.getContext(\"2d\");r.width=640,r.height=1136;let i=new Image;i.src=e.url,i.onload=(()=>{o.drawImage(i,0,0),o.fillStyle=\"#fff\",o.font=\"bolder 25px NSimSun\",o.textAlign=\"right\",o.fillText(t.name,240,57);let e=r.toDataURL(\"image/jpeg\"),a=`\\n    <style>\\n        /*专属海报css*/\\n\\n        .personal-poster{\\n            position: fixed;\\n            left: 0;\\n            top: 0;\\n            width: 100%;\\n            height: 100%;\\n            text-align: center;\\n            color: white;\\n            background-image: url(\"${n(\"poster_bg\")}\");\\n            background-size: cover;\\n        }\\n        .personal-poster__img{\\n            margin-top: 1em;\\n            width: 73%;\\n            height: 78%;\\n            object-fit: contain;\\n            animation: poster-transition 2s;\\n        }\\n        .restart-button{\\n            font-size: 1.5em;\\n            height: 2em;\\n            color: white;\\n            background-color: transparent;\\n            border: 1px solid white;\\n            border-radius: 1em;\\n            padding: 0 2em;\\n        }\\n        .restart-button:hover{\\n            cursor: pointer;\\n        }\\n        .restart-button:focus{\\n            outline: none;\\n        }\\n        \\n        @keyframes poster-transition {\\n            from {\\n                transform: scale(2.5);\\n            }\\n            to{\\n                transform: scale(1);\\n            }\\n        }\\n        \\n    </style>\\n    <div class=\"personal-poster\">\\n        <img src=\"${e}\" class=\"personal-poster__img\">\\n        <p class=\"personal-poster__hint\">长按保存图片</p>\\n        <button class=\"restart-button\" onclick=\"location.reload()\">再测一次</button>\\n    </div>`,s=document.createElement(\"div\");document.body.appendChild(s),s.outerHTML=a})},optionTypes:i}}()},function(n,e){function t(n){let e=n.split(/(\\s)/),t=[];return e.forEach(n=>{let e=\"\";for(let r of n)e+=r,r>=\"一\"&&r<=\"龥\"&&(t.push(e),e=\"\");e.length>0&&t.push(e)}),t}createjs.Text.prototype._drawText=function(n,e,r){var o=!!n;o||((n=Text._workingContext).save(),this._prepContext(n));for(var i=this.lineHeight||this.getMeasuredLineHeight(),a=0,s=0,l=String(this.text).split(/(?:\\r\\n|\\r|\\n)/),u=0,d=l.length;u<d;u++){var c=l[u],m=null;if(null!=this.lineWidth&&(m=n.measureText(c).width)>this.lineWidth){var p=t(c);c=p[0],m=n.measureText(c).width;for(var g=1,h=p.length;g<h;g++){var f=n.measureText(p[g]).width;m+f>this.lineWidth?(o&&this._drawTextLine(n,c,s*i),r&&r.push(c),m>a&&(a=m),console.log(c),c=p[g],m=n.measureText(c).width,s++):(c+=p[g],m+=f)}}o&&this._drawTextLine(n,c,s*i),r&&r.push(c),e&&null==m&&(m=n.measureText(c).width),m>a&&(a=m),s++}return e&&(e.width=a,e.height=s*i),o||n.restore(),e}},function(n,e){window.waitAnswer=function(n,e=[{name:`option${n}A`,representedAnswer:PersonalityTester.optionTypes.A},{name:`option${n}B`,representedAnswer:PersonalityTester.optionTypes.B},{name:`option${n}C`,representedAnswer:PersonalityTester.optionTypes.C},{name:`option${n}D`,representedAnswer:PersonalityTester.optionTypes.D}]){this.stop(),e.forEach(e=>{this[e.name].addEventListener(\"click\",function(){PersonalityTester.updateAnswer(n,e.representedAnswer),this.play()}.bind(this))})},window.waitClickingScreen=function(){this.stop();let n=()=>{this.play(),window.document.body.removeEventListener(\"click\",n)};window.document.body.addEventListener(\"click\",n)}}]);","extractedComments":[]}